webpackJsonp([9],{TkUA:function(e,t,l){t=e.exports=l("acE3")(!0),t.push([e.i,"\n.menu_wrap {\n  background: #fff;\n  padding: 0px 20px 20px 20px;\n}\n","",{version:3,sources:["E:/IBM_terminal2/src/views/menuManage/menu.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,4BAA4B;CAC7B",file:"menu.vue",sourcesContent:["\n.menu_wrap {\n  background: #fff;\n  padding: 0px 20px 20px 20px;\n}\n"],sourceRoot:""}])},dz8y:function(e,t,l){var n=l("TkUA");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);l("XkoO")("31cfef23",n,!0)},iriI:function(e,t,l){"use strict";function n(e){return Object(c.a)({url:d.a.proxyPath+"saveMenu",method:"get",params:e})}function i(e){return Object(c.a)({url:d.a.proxyPath+"queryMenu",method:"get",params:e})}function a(e){return Object(c.a)({url:d.a.proxyPath+"deletePLMenuById",method:"get",params:e})}function o(e){return Object(c.a)({url:d.a.proxyPath+"updateMenu",method:"get",params:e})}function r(e){l("dz8y")}Object.defineProperty(t,"__esModule",{value:!0});var s=l("HzJ8"),u=l.n(s),c=l("Vo7i"),d=l("F5q8"),f=l("TIfe"),_=l("Wohg"),m={name:"munuMange",data:function(){return{editId:"",tableData:[],cascaderData:[],filterText:"",addMenuDialogVisible:!1,menuId:"",options:[],editInitData:{},delDialogObj:{deldialogVisible:!1,title:"删除操作",content:"删除后不可恢复，确认要删除吗？",isAll:!1},delId:"",ruleForm:{MENU_NAME:"",MENU_URL:"",PARENT_ID:"",MENU_STATE:""},rules:{MENU_NAME:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到20 个字符",trigger:"blur"}],MENU_URL:[{required:!0,message:"请输入菜单路径",trigger:"blur"},{min:3,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},multipleSelection:[],defaultProps:{children:"subMenu",label:"MENU_NAME"}}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},computed:{},created:function(){this.menuInit()},methods:{menuInit:function(){var e=this,t={USER_ID:Object(f.c)(),RIGHTS:Object(f.b)().RIGHTS};Object(_.a)(t).then(function(t){e.cascaderData=t,e.options=t})},nodeClick:function(e){this.menuId=e.MENU_ID,this.menuTable()},menuTable:function(){var e=this;i({MENUANDPARENT:this.menuId}).then(function(t){e.tableData=t.LISTMENUINFO;var l=!0,n=!1,i=void 0;try{for(var a,o=u()(e.tableData);!(l=(a=o.next()).done);l=!0){a.value.MENU_STATE}}catch(e){n=!0,i=e}finally{try{!l&&o.return&&o.return()}finally{if(n)throw i}}})},allDelBut:function(){this.delDialogObj.deldialogVisible=!0,this.delDialogObj.isAll=!0},batchDeleting:function(){var e=this,t=this.multipleSelection.map(function(e){return e.MENU_ID}).join();this.delDialogObj.deldialogVisible=!1,a({MENU_ID:t}).then(function(t){"E"==t.TYPE&&e.$message.warning("主菜单不可删"),e.menuTable()})},delFun:function(e){this.delDialogObj.deldialogVisible=!0,this.delId=e.id},oneDeleteing:function(){var e=this;this.delDialogObj.deldialogVisible=!1,a({MENU_ID:this.delId}).then(function(t){"E"==t.TYPE&&e.$message.warning("主菜单不可删"),e.menuTable(),e.menuInit()})},editFun:function(e){for(var t=0;t<this.tableData.length;t++)this.tableData[t].MENU_ID==e.id?this.tableData[t].hasMenu=!0:this.tableData[t].hasMenu=!1},update:function(e){for(var t=this,l=0;l<this.tableData.length;l++)this.tableData[l].MENU_ID==e.id&&(this.tableData[l].hasMenu=!1);o({MENU_ID:e.id,MENU_NAME:e.name,MENU_URL:e.path,PARENT_ID:e.parentId,MENU_STATE:1==e.status?1:0}).then(function(e){t.menuTable()})},addMenu:function(e){var t=this;this.$refs[e].validate(function(l){if(!l)return console.log("error submit!!"),!1;n({MENU_NAME:t.ruleForm.MENU_NAME,MENU_URL:t.ruleForm.MENU_URL,PARENT_ID:t.ruleForm.PARENT_ID,MENU_ORDER:"",MENU_ICON:"",MENU_TYPE:"",MENU_STATE:1==t.ruleForm.MENU_STATE?1:0,LAST_UPD_USR:"",LAST_UPD_DT:"",VER:""}).then(function(l){t.$refs[e].resetFields(),t.menuTable(),t.menuInit(),t.addMenuDialogVisible=!1})})},handleSelectionChange:function(e){this.multipleSelection=e},filterNode:function(e,t){return!e||-1!==t.MENU_NAME.indexOf(e)},handleClose:function(e){this.$confirm("确认关闭？").then(function(){e()}).catch(function(){})}}},E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu_wrap"},[n("el-row",{staticStyle:{"padding-bottom":"20px"}},[n("el-col",{attrs:{span:6,offset:18}},[n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success"},on:{click:function(t){e.addMenuDialogVisible=!0}}},[e._v("新增菜单")]),e._v(" "),n("el-button",{attrs:{disabled:0==this.multipleSelection.length},on:{click:e.allDelBut}},[e._v("批量删除")])],1)],1),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"tree2",staticStyle:{height:"350px",overflow:"auto","margin-top":"20px"},attrs:{data:e.cascaderData,"node-key":"MENU_ID","filter-node-method":e.filterNode,props:e.defaultProps},on:{"node-click":e.nodeClick}})],1),e._v(" "),n("el-col",{attrs:{span:18}},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasMenu?n("el-input",{model:{value:t.row.MENU_NAME,callback:function(l){e.$set(t.row,"MENU_NAME",l)},expression:"scope.row.MENU_NAME"}}):n("span",[e._v(e._s(t.row.MENU_NAME))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"资源路径",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasMenu?n("el-input",{model:{value:t.row.MENU_URL,callback:function(l){e.$set(t.row,"MENU_URL",l)},expression:"scope.row.MENU_URL"}}):n("span",[e._v(e._s(t.row.MENU_URL))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{model:{value:t.row.MENU_STATE,callback:function(l){e.$set(t.row,"MENU_STATE",l)},expression:"scope.row.MENU_STATE"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasMenu?n("el-button",{attrs:{type:"success",icon:"el-icon-document",size:"mini"},on:{click:function(l){e.update({id:t.row.MENU_ID,parentId:t.row.PARENT_ID,name:t.row.MENU_NAME,path:t.row.MENU_URL,status:t.row.MENU_STATE})}}}):n("el-button",{attrs:{type:"info",icon:"el-icon-edit",size:"mini"},on:{click:function(l){e.editFun({id:t.row.MENU_ID})}}}),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(l){e.delFun({id:t.row.MENU_ID})}}})]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"新增菜单",visible:e.addMenuDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.addMenuDialogVisible=t}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"MENU_NAME"}},[n("el-input",{model:{value:e.ruleForm.MENU_NAME,callback:function(t){e.$set(e.ruleForm,"MENU_NAME",t)},expression:"ruleForm.MENU_NAME"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"父级菜单"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.PARENT_ID,callback:function(t){e.$set(e.ruleForm,"PARENT_ID",t)},expression:"ruleForm.PARENT_ID"}},e._l(e.options,function(e){return n("el-option",{key:e.MENU_ID,attrs:{label:e.MENU_NAME,value:e.MENU_ID}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单路径",prop:"MENU_URL"}},[n("el-input",{model:{value:e.ruleForm.MENU_URL,callback:function(t){e.$set(e.ruleForm,"MENU_URL",t)},expression:"ruleForm.MENU_URL"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单状态"}},[n("el-checkbox",{model:{value:e.ruleForm.MENU_STATE,callback:function(t){e.$set(e.ruleForm,"MENU_STATE",t)},expression:"ruleForm.MENU_STATE"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addMenuDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addMenu("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.delDialogObj.deldialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.$set(e.delDialogObj,"deldialogVisible",t)}}},[n("div",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:l("Jmj8")}}),e._v(" "),n("h3",[e._v(e._s(e.delDialogObj.title))]),e._v(" "),n("span",[e._v(e._s(e.delDialogObj.content))])]),e._v(" "),n("span",{staticClass:"dialog-footer dialog-footer_span",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delDialogObj.deldialogVisible=!1}}},[e._v("我在想想")]),e._v(" "),e.delDialogObj.isAll?n("el-button",{attrs:{type:"primary"},on:{click:e.batchDeleting}},[e._v("确定")]):n("el-button",{attrs:{type:"primary"},on:{click:e.oneDeleteing}},[e._v("确定")])],1)])],1)],1)},p=[],b={render:E,staticRenderFns:p},M=b,h=l("/Xao"),N=r,U=h(m,M,!1,N,null,null);t.default=U.exports}});
//# sourceMappingURL=9.5dfcebac38c519733862.js.map